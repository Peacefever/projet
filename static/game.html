<!DOCTYPE html>

<html>

  <head>

    <meta charset="utf-8"/>

    <title>Interface Game Page</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>

		<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='ficher.css') }}">

    <script type="text/javascript">

      $(function(){

        $("#information").on('submit',function(event){         

          $.ajax('http://172.30.1.119:5000/helloworld').done(function(data){

            alert(data);

          })

        event.preventDefault();

        })

      });

    </script>

  </head>



  <body style="background-image: url(http://img.fac.pmdstatic.net/fit/http.3A.2F.2Fwww.2Efemmeactuelle.2Efr.2Fvar.2Ffemmeactuelle.2Fstorage.2Fimages.2Fcuisine.2Frecettes.2Fboisson.2Flimonade-au-citron-vert-09024.2F14043909-1-fre-FR.2Flimonade-au-citron-vert.2Ejpg/1200x600/crop-from/center/limonade-au-citron-vert.jpeg); background-size: 100%;">

    <div style="background:url('https://pub.be/wp-content/uploads/2016/02/LIMO-citron.png') no-repeat; padding:3px; border:8px ridge #F7FF3C; background-color:#000000; max-width: 600px; Opacity: 1;"><fieldset>

      <legend><strong>Nouvelles données</strong></legend> <!-- Titre du fieldset -->

      <form id="decision">

            <br><label for="text">Production limonades </label>

            <input type="text" name="production" id="production" />

            <br><br><label for="name">Prix limonades </label>

            <input type="text" name="prix" id="prix" />

            <br><br><button value="Decision" id="sendStock">Envoyer au serveur</button>

      </form>

  </fieldset></div>

    <div style="background:url('http://en.grand-marnier.com/assets/en/cocktails/cocktails_withgrandmojito.jpg') no-repeat; padding:3px; border:8px ridge #F7FF3C; background-color:#000000; max-width: 600px; Opacity: 1;"><fieldset>

    <legend><strong>Données joueur</strong></legend> <!-- Titre du fieldset --> 

    <form id="information">

          <br><label for="Pseudo">Pseudo :</label>

          <input type="text" name="pseudo" id="pseudo" value="{{ username }}" readonly/>

          <br><br><label for="Stock">Stock :</label>

          <input type="text" name="stock" id="stock" readonly/>

          <br><br><label for="Limo">Prix limonades :</label>

          <input type="text" name="limo" id="limo" value="{{ prix }}" readonly/>

    </form>

  </fieldset></div>

    <div style="background:url('http://www.landi.ch/weather/Content/Wetter/43_real.png') no-repeat; padding:3px; border:8px ridge #F7FF3C; background-color:#000000; max-width: 600px; Opacity: 1;"><fieldset>

    <legend><strong>Données environnement</strong></legend> <!-- Titre du fieldset --> 

    <form id="information">

          <br><label for="Meteo">Météo :</label>

          <input type="text" name="meteo" id="meteo" readonly/>

          <br><br><label for="Jour">Jour :</label>

          <input type="text" name="jour" id="jour" readonly/>

          <br><br><button id="refresh">Rafraichir</button>

    </form>

  </fieldset></div>

<script type="text/javascript"> // Sending message to server

      $(function() {

        $("body").on('click','#sendStock',function(event) {
			console.log('click');

          event.preventDefault();

          var Message = {

              prixLimo: $('#prix').val(),

              prodLimo: $('#production').val(),

          }

console.log(Message);


          $.ajax({
			url : 'http://172.30.1.119:5000/create',
             //player

              type: "POST",

              contentType: 'application/json',
              data: JSON.stringify(Message),
				dataType : "json"

              //data: JSON.stringify({"pseudo" : "alexandre"})

            }).done(function(result){
                console.log(result);
				//result = JSON.parse(result);
				$('#stock').val(result.prodLimo);
				$('#limo').val(result.prixLimo);
            });

        

        });

      });

    </script>

</body>

</html>
