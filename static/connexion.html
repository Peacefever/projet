<!DOCTYPE html>

<html>

	<head>

		<meta charset="utf-8"/>

		<title>Connexion Page</title>

		<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='ficher.css') }}">

	</head>

	<body>		

		<div style="padding:3px; border:5px outset #303030; background-color:#303030; position:absolute; left: 50%; top: 50%; width: 280px; height: 140px; margin-left: -150px; margin-top: -100px;"><center><fieldset>

			<legend><strong>Page de connexion</strong></legend>

			<!--<form id="connexion" action="/players" method="POST"-->

				<label for="name">Pseudo :</label>

				<input type="text" name="username" id="username">

				<br><br><button onclick="myFunctionAlert()" type="submit" value="Connexion">Connexion</button>

			<!--/form-->

		</fieldset></center></div>



<script>
function myFunctionAlert() {
	var pseudo = document.getElementById("username").value;
    alert("Bienvenue " + pseudo + " !");
}
</script>


		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>



		    <script>
                         $( document ).ready(function(){
                                 $.ajax({
                                        //url: "/test",
                                        //type: "POST",
                                        //success: function(response){
                                          //      alert("Done " + response);
                                        //},
                                        //failure: function(error){
                                        //        alert(error);
                                      //  }
                                });
                         });
                         $("#connexion").click(function(e){
                                e.preventDefault()
                                let data = {
                                        "name": $("#username").val()
                                }
                                $.ajax({
                                        url: "/players",
                                        type: "POST",
                                        dataType :"json",
                                        data: JSON.stringify(data),
                                        contentType: "application/json; charset=utf-8",
                                        success: function(response){
                                                alert("Done " + response);
                                                var dat = JSON.parse(response);
                                                alert(dat.name);
                                                document.cookie = response;
                                                window.location.href = "/game.html";
                                        },
                                        failure: function(error){
                                                alert(error);
                                        }
                                });
                        })
                </script>

	</body>

</html>
