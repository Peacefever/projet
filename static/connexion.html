<!DOCTYPE html>
<html>
        <head>
                <meta charset="utf-8"/>
                <title>Connexion Page</title>
        <link rel="stylesheet" href="main.css" />
        </head>
        <body>
                <fieldset>
                        <legend><strong>Page de connexion</strong></legend>
                        <label>Utilisateur : <input type='text' id="username"></label>
                        <label>Reponse : <input type="text" id="response" readonly></label>
                        <br><button type="button" id="connexion" value="Connexion">Connexion</button>
                </fieldset>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
                <script>
                         $( document ).ready(function(){
                                alert("Ready !!!");
                         });
                         $("#connexion").click(function(e){
                                e.preventDefault()
                                let data = {
                                        "name": $("#username").val()
                                }
                                $.ajax({
                                        url: "/players",
                                        type: "POST",
                                        dataType :"json",
                                        data: JSON.stringify(data),
                                        contentType: "application/json; charset=utf-8",
                                        success: function(response){
                                                alert("Done " + response);
                                                var dat = JSON.parse(response);
                                                alert(dat.name);
                                                document.cookie = response;
                                                window.location.href = "/game.html";
                                        },
                                        failure: function(error){
                                                alert(error);
                                        }
                                });
                        })
                </script>
        </body>
</html>

